
var extend = require('tea-extend')
  , facet = require('facet');

exports.Builder = AskBuilder;
exports.Message = Ask;

function AskBuilder (ev, ref) {
  this._event = ev;
  this._ref = ref;
  this._cb = function () {};
}

facet(AskBuilder, '_data');

AskBuilder.prototype.sender = function (ref) {
  this._ref = ref;
  return this;
};

AskBuilder.prototype.res = function (cb) {
  this._cb = cb;
  return this;
};

AskBuilder.prototype.serialize = function () {
  var data = extend({}, this._data)
    , ref = this._ref.serialize();

  return {
      data: data
    , event: this._event
    , sender: ref
  };
};

function Ask (obj) {
  this.data = obj.data;
  this.event = obj.event;
  this.sender = obj.sender;
}

Ask.prototype.isAsk = function () {
  return true;
};

Ask.prototype.isTell = function () {
  return false;
};
