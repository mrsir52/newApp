
var extend = require('tea-extend')
  , facet = require('facet');

exports.Builder = TellBuilder;
exports.Message = Tell;

function TellBuilder (ev, ref) {
  this._event = ev;
  this._ref = ref;
}

facet(TellBuilder, '_data');

TellBuilder.prototype.sender = function (ref) {
  this._ref = ref;
  return this;
};

TellBuilder.prototype.serialize = function () {
  var data = extend({}, this._data)
    , ref = this._ref.serialize();

  return {
      data: data
    , event: this._event
    , sender: ref
  };
};

function Tell (obj) {
  this.data = obj.data;
  this.event = obj.event;
  this.sender = obj.sender;
}

Tell.prototype.isAsk = function () {
  return false;
};

Tell.prototype.isTell = function () {
  return true;
};
